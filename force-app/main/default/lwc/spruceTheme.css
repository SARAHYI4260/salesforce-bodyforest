/* ==========================================================================
   Salesforce Corporate Brand Theme (Light Background & Utility Bar Fix)
   ========================================================================== */

:root {
    --brand-bg-color: #F1F8F5;       /* 배경: 아주 연한 화이트 민트 */
    /*--brand-dark-green: #104a32;     /* 포인트: 짙은 숲색 */
    --brand-card-bg: #ffffff;        /* 카드 배경: 흰색 */
    --brand-border-color: #d8dde6;   /* 테두리 색상 */
}

/* --------------------------------------------------------------------------
   1. [헤더 & 유틸리티 바] 순정 스타일 유지 (수정됨)
   -------------------------------------------------------------------------- */
/* 상단 헤더 (Global Header) */
.oneGlobalNav {
    background-color: #ffffff !important;
    background-image: none !important;
    box-shadow: none !important;
    border-bottom: 1px solid #d8dde6 !important;
}

/* 하단 유틸리티 바 (Utility Bar) 배경 및 테두리 */
.oneUtilityBar {
    background-color: #ffffff !important;
    border-top: 1px solid #d8dde6 !important;
}

/* [중요] 헤더와 유틸리티 바 내부의 아이콘/텍스트는 커스텀 디자인 제외 */
.oneGlobalNav *, 
.oneUtilityBar * {
    background-color: #F1F8F5 !important; /* 배경 투명 */
    border-radius: 0 !important;              /* 둥근 모서리 제거 */
    fill: currentColor !important;            /* 원래 색상 유지 */
    border: none !important;                  /* 테두리 제거 */
    box-shadow: none !important;              /* 그림자 제거 */
}

/* --------------------------------------------------------------------------
   2. [배경] Org 전체 배경색 강제 적용
   -------------------------------------------------------------------------- */
body, 
body.desktop,
.slds-template_default,
.oneAppNavContainer,
.flexipagePage,
.oneAlohaPage,
.forceStyle .viewport .oneHeader,
.forceStyle.desktop .viewport {
    background-color: var(--brand-bg-color) !important;
    background-image: none !important;
    background-repeat: repeat !important;
}

/* --------------------------------------------------------------------------
   3. [메인 박스] 최상위 컴포넌트 디자인
   -------------------------------------------------------------------------- */
flexipage-component2 > slot > article.slds-card,
flexipage-component2 > slot > .slds-card,
flexipage-component2 > slot > .forceRecordLayout,
.site-footer,
c-customer-profile-card .profile-card,
.forceDetailPanelDesktop, 
.forceRelatedListCardDesktop {
    background-color: var(--brand-card-bg) !important;
    
    /* 최상위 박스 상단에만 진한 녹색 굵은 라인 */
    border-top: 4px solid var(--brand-dark-green) !important; 
    
    border-left: 1px solid var(--brand-border-color) !important;
    border-right: 1px solid var(--brand-border-color) !important;
    border-bottom: 1px solid var(--brand-border-color) !important;
    
    border-radius: 8px !important; 
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05) !important;
    margin-bottom: 1rem !important;
    
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
}

/* --------------------------------------------------------------------------
   4. [내부 박스] 중복 디자인 제거
   -------------------------------------------------------------------------- */
article.slds-card article.slds-card,
.forceRelatedListCardDesktop .slds-card,
.slds-card .slds-card,
.slds-card .slds-box {
    border: 1px solid var(--brand-border-color) !important;
    box-shadow: none !important; 
    background-color: transparent !important; 
    margin: 0 !important;
    border-radius: 4px !important;
}

/* --------------------------------------------------------------------------
   5. [아이콘] 본문 영역 아이콘만 Dark Green 배경 (헤더/유틸리티 제외)
   -------------------------------------------------------------------------- */
/* .oneGlobalNav(헤더)와 .oneUtilityBar(하단)가 아닌 곳의 아이콘만 변경 */
body:not(.oneGlobalNav):not(.oneUtilityBar) .flexipagePage span[class*="slds-icon-standard-"],
body:not(.oneGlobalNav):not(.oneUtilityBar) .flexipagePage span[class*="slds-icon-custom-"],
body:not(.oneGlobalNav):not(.oneUtilityBar) .flexipagePage .forceEntityIcon,
body:not(.oneGlobalNav):not(.oneUtilityBar) .flexipagePage .slds-icon_container {
    background-color: var(--brand-dark-green) !important;
    border-radius: 4px !important;
}

body:not(.oneGlobalNav):not(.oneUtilityBar) .flexipagePage span[class*="slds-icon-"] svg {
    fill: #ffffff !important;
}

/* 유틸리티 아이콘(X버튼 등)은 투명 유지 */
button span[class*="slds-icon-utility-"] {
    background-color: transparent !important;
}

/* --------------------------------------------------------------------------
   6. [기타] 텍스트, 버튼, 테이블, 스크롤바
   -------------------------------------------------------------------------- */
/* 제목 텍스트 (Dark Green) */
.flexipageComponent .slds-card__header-title a,
.flexipageComponent .slds-card__header-title span,
.flexipageComponent h2.slds-text-heading_medium,
c-customer-profile-card .custom-card-header h2 {
    color: var(--brand-dark-green) !important;
    font-weight: 700 !important;
    text-decoration: none !important;
}

/* 버튼 스타일 */
.slds-button_brand {
    background-color: var(--brand-dark-green) !important;
    border-color: var(--brand-dark-green) !important;
}

/* 테이블 배경 투명화 */
.slds-table, .slds-table thead th, .slds-table tbody td {
    background-color: transparent !important;
}

/* 스크롤바 디자인 */
::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-track { background-color: transparent; }
::-webkit-scrollbar-thumb {
    background-color: #B4D6C6; 
    border-radius: 10px;
    border: 3px solid transparent; 
    background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover { background-color: #8FBCA8; }

/* --------------------------------------------------------------------------
   7. [유틸리티 바] StyleLoader 버튼 숨기기 (투명인간 모드)
   -------------------------------------------------------------------------- */
.oneUtilityBar .utilityBarItem button:not(:has(lightning-icon)),
.oneUtilityBar .utilityBarItem button:not(:has(svg)) {
    width: 0 !important;
    padding: 0 !important;
    border: none !important;
    overflow: hidden !important;
    min-width: 0 !important;
    visibility: hidden !important;
}